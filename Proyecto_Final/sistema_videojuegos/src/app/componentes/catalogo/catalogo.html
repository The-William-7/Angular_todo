<div class="catalog">
  <!-- ENCABEZADO -->
  <div class="catalog-header">
    <h2>ðŸŽ® CatÃ¡logo de Videojuegos</h2>
    <p class="subtitle">Descubre los mejores juegos para todas las plataformas</p>
  </div>

  <!-- LOADING -->
  <div *ngIf="cargando" class="loading">
    <div class="spinner"></div>
    <p>Cargando catÃ¡logo...</p>
  </div>
  
  <!-- CONTENIDO PRINCIPAL -->
  <div *ngIf="!cargando">
    <!-- COMPONENTE FILTROS -->
    <app-filtros-hijo
      [textoBusqueda]="textoBusqueda"
      [generos]="generos"
      [plataformas]="plataformas"
      [generoSeleccionado]="generoSeleccionado"
      [plataformaSeleccionada]="plataformaSeleccionada"
      [precioMaximo]="precioMaximo"
      [ordenSeleccionado]="ordenSeleccionado"
      [mostrarSoloOfertas]="mostrarSoloOfertas"
      (searchChange)="onSearchChange($event)"
      (filterChange)="onFilterChange($event)"
      (sortChange)="onSortChange($event)"
      (limpiarFiltros)="onLimpiarFiltros()">
    </app-filtros-hijo>

    <!-- INFORMACIÃ“N DE RESULTADOS -->
    <div class="results-info">
      <p>ðŸ“Š Mostrando {{ juegosFiltrados.length }} de {{ juegos.length }} juegos</p>
    </div>

    <!-- COMPONENTE OFERTAS -->
    <app-ofertas
      *ngIf="juegosEnOferta.length > 0 && !mostrarSoloOfertas"
      [juegosEnOferta]="juegosEnOferta"
      (verDetalles)="onVerDetalles($event)"
      [calcularDescuento]="calcularDescuento">
    </app-ofertas>
    
    <!-- COMPONENTE LISTA DE JUEGOS -->
    <app-lista-hijo
      [juegos]="juegosFiltrados"
      [calcularDescuento]="calcularDescuento"
      (verDetalles)="onVerDetalles($event)"
      (agregarCarrito)="onAgregarCarrito($event)"
      (agregarListaDeseos)="onAgregarListaDeseos($event)"
      (calificarJuego)="onCalificarJuego($event)">
    </app-lista-hijo>

    <!-- MENSAJE SIN RESULTADOS -->
    <div *ngIf="juegosFiltrados.length === 0" class="no-results">
      <p>ðŸ˜ž No se encontraron juegos con los filtros seleccionados</p>
      <button (click)="onLimpiarFiltros()" class="btn btn-primary">
        Ver todos los juegos
      </button>
    </div>

    <!-- COMPONENTE MODAL DETALLES -->
    <app-funciones
      *ngIf="juegoSeleccionado"
      [juego]="juegoSeleccionado"
      [calcularDescuento]="calcularDescuento"
      [formatearFecha]="formatearFecha"
      (cerrar)="onCerrarDetalles()"
      (agregarCarrito)="onAgregarCarrito($event)"
      (agregarListaDeseos)="onAgregarListaDeseos($event)">
    </app-funciones>
  </div>
</div>