<div class="catalog">
  <!-- ENCABEZADO -->
  <div class="catalog-header">
    <h2>üéÆ Cat√°logo de Videojuegos</h2>
    <p class="subtitle">Descubre los mejores juegos para todas las plataformas</p>
  </div>
  
  <!-- BARRA DE B√öSQUEDA -->
  <div class="search-bar">
    <input 
      type="text" 
      [(ngModel)]="textoBusqueda" 
      placeholder="üîç Buscar juegos por nombre, g√©nero o plataforma..."
      class="search-input"
    >
  </div>

  <!-- PANEL DE CONTROLES -->
  <div class="controls-panel">
    <!-- FILTROS -->
    <div class="filters-section">
      <h3>üîß Filtros</h3>
      
      <div class="filters-grid">
        <!-- Filtro por G√©nero -->
        <div class="filter-group">
          <label>üé≠ G√©nero:</label>
          <select [(ngModel)]="generoSeleccionado" class="filter-select">
            <option *ngFor="let genero of generos" [value]="genero">
              {{ genero === 'todos' ? 'Todos los g√©neros' : genero }}
            </option>
          </select>
        </div>

        <!-- Filtro por Plataforma -->
        <div class="filter-group">
          <label>üéÆ Plataforma:</label>
          <select [(ngModel)]="plataformaSeleccionada" class="filter-select">
            <option *ngFor="let plataforma of plataformas" [value]="plataforma">
              {{ plataforma === 'todas' ? 'Todas las plataformas' : plataforma }}
            </option>
          </select>
        </div>

        <!-- Filtro por Precio -->
        <div class="filter-group">
          <label>üí∞ Precio m√°ximo: ${{ precioMaximo }}</label>
          <input 
            type="range" 
            [(ngModel)]="precioMaximo" 
            min="0" 
            max="100" 
            step="10"
            class="price-slider"
          >
          <div class="price-labels">
            <span>$0</span>
            <span>$50</span>
            <span>$100</span>
          </div>
        </div>

        <!-- Filtro Ofertas -->
        <div class="filter-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="mostrarSoloOfertas">
            üè∑Ô∏è Ver solo ofertas
          </label>
        </div>
      </div>
    </div>

    <!-- ORDENAMIENTO -->
    <div class="sorting-section">
      <h3>üìä Ordenar por</h3>
      <div class="sort-options">
        <select [(ngModel)]="ordenSeleccionado" class="sort-select">
          <option *ngFor="let opcion of opcionesOrden" [value]="opcion.valor">
            {{ opcion.texto }}
          </option>
        </select>
      </div>
    </div>

    <!-- ACCIONES -->
    <div class="actions-section">
      <button (click)="limpiarFiltros()" class="btn btn-clear">
        üóëÔ∏è Limpiar Todo
      </button>
    </div>
  </div>

  <!-- CONTADOR DE RESULTADOS -->
  <div class="results-info">
    <p>üìä Mostrando {{ buscarJuegos().length }} de {{ juegos.length }} juegos</p>
    <div class="active-filters" *ngIf="generoSeleccionado !== 'todos' || plataformaSeleccionada !== 'todas' || precioMaximo < 100 || mostrarSoloOfertas">
      <small>
        Filtros activos: 
        <span *ngIf="generoSeleccionado !== 'todos'">{{ generoSeleccionado }}</span>
        <span *ngIf="plataformaSeleccionada !== 'todas'"> ‚Ä¢ {{ plataformaSeleccionada }}</span>
        <span *ngIf="precioMaximo < 100"> ‚Ä¢ Hasta ${{ precioMaximo }}</span>
        <span *ngIf="mostrarSoloOfertas"> ‚Ä¢ Solo ofertas</span>
        <span> ‚Ä¢ Orden: {{ textoOrdenActual }}</span>
      </small>
    </div>
  </div>

  <!-- SECCI√ìN OFERTAS ESPECIALES -->
  <div class="ofertas-section" *ngIf="juegosEnOferta.length > 0 && !mostrarSoloOfertas">
    <h3>üî• Ofertas Especiales</h3>
    <div class="ofertas-grid">
      <div *ngFor="let juego of juegosEnOferta.slice(0, 3)" class="oferta-card">
        <div class="descuento-badge">-{{ calcularDescuento(juego) }}%</div>
        <img [src]="juego.imagen" [alt]="juego.nombre" class="game-image">
        <div class="oferta-info">
          <h4>{{ juego.nombre }}</h4>
          <div class="precios">
            <span class="precio-original">${{ juego.precioOriginal }}</span>
            <span class="precio-oferta">${{ juego.precio }}</span>
          </div>
          <button (click)="verDetalles(juego)" class="btn btn-oferta">Ver Oferta</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- LISTA DE JUEGOS -->
  <div class="game-list">
    <div *ngFor="let juego of buscarJuegos()" class="game-card">
      <!-- Badge Oferta -->
      <div *ngIf="juego.enOferta" class="descuento-badge">-{{ calcularDescuento(juego) }}%</div>
      
      <!-- Imagen del Juego -->
      <img [src]="juego.imagen" [alt]="juego.nombre" class="game-image">
      
      <!-- Informaci√≥n del Juego -->
      <div class="game-info">
        <h3>{{ juego.nombre }}</h3>
        <p><strong>Plataforma:</strong> {{ juego.plataforma }}</p>
        <p><strong>G√©nero:</strong> {{ juego.genero }}</p>
        
        <!-- Precios -->
        <p><strong>Precio:</strong> 
          <span *ngIf="juego.enOferta" class="precio-original">${{ juego.precioOriginal }}</span>
          <span [class.free]="juego.precio === 0" class="price">
            {{ juego.precio === 0 ? 'GRATIS' : '$' + juego.precio }}
          </span>
        </p>

        <!-- Rating -->
        <p><strong>Rating:</strong> 
          <span class="stars">
            <span *ngFor="let star of [1,2,3,4,5]" 
                  (click)="calificarJuego(juego, star)"
                  class="star clickable"
                  [class.active]="star <= juego.rating">
              {{ star <= juego.rating ? '‚≠ê' : '‚òÜ' }}
            </span>
          </span>
          ({{ juego.rating }}/5)
        </p>

        <!-- Stock -->
        <p><strong>Stock:</strong> 
          <span [class.stock-bajo]="juego.stock < 5" [class.stock-medio]="juego.stock >= 5 && juego.stock < 15">
            {{ juego.stock }} unidades
          </span>
        </p>
      </div>
      
      <!-- Acciones -->
      <div class="game-actions">
        <button (click)="verDetalles(juego)" class="btn btn-info">
          üëÄ Detalles
        </button>
        <button (click)="agregarAlCarrito(juego)" class="btn btn-success">
          üõí Comprar
        </button>
        <button (click)="agregarListaDeseos(juego)" class="btn btn-wishlist">
          ‚ù§Ô∏è Deseos
        </button>
      </div>
    </div>
  </div>

  <!-- MENSAJE SIN RESULTADOS -->
  <div *ngIf="buscarJuegos().length === 0" class="no-results">
    <p>üòû No se encontraron juegos con los filtros seleccionados</p>
    <button (click)="limpiarFiltros()" class="btn btn-primary">
      Ver todos los juegos
    </button>
  </div>

  <!-- MODAL DETALLES DEL JUEGO -->
  <div *ngIf="juegoSeleccionado" class="modal-overlay" (click)="cerrarDetalles()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="cerrarDetalles()">√ó</button>
      
      <div class="modal-body">
        <div class="modal-image">
          <img [src]="juegoSeleccionado.imagen" [alt]="juegoSeleccionado.nombre">
        </div>
        
        <div class="modal-info">
          <h2>{{ juegoSeleccionado.nombre }}</h2>
          
          <div class="modal-details">
            <p><strong>Plataforma:</strong> {{ juegoSeleccionado.plataforma }}</p>
            <p><strong>G√©nero:</strong> {{ juegoSeleccionado.genero }}</p>
            <p><strong>Fecha de Lanzamiento:</strong> {{ formatearFecha(juegoSeleccionado.fechaLanzamiento) }}</p>
            <p><strong>Rating:</strong> 
              <span class="stars">
                <span *ngFor="let star of [1,2,3,4,5]" class="star active">‚≠ê</span>
              </span>
              ({{ juegoSeleccionado.rating }}/5)
            </p>
            
            <!-- Precios -->
            <div class="modal-precio" *ngIf="juegoSeleccionado.enOferta">
              <span class="precio-original">${{ juegoSeleccionado.precioOriginal }}</span>
              <span class="precio-oferta">${{ juegoSeleccionado.precio }}</span>
              <span class="descuento">-{{ calcularDescuento(juegoSeleccionado) }}%</span>
            </div>
            <div class="modal-precio" *ngIf="!juegoSeleccionado.enOferta">
              <span class="price">{{ juegoSeleccionado.precio === 0 ? 'GRATIS' : '$' + juegoSeleccionado.precio }}</span>
            </div>

            <!-- Stock -->
            <p><strong>Disponibilidad:</strong> 
              <span [class.stock-bajo]="juegoSeleccionado.stock < 5" 
                    [class.stock-medio]="juegoSeleccionado.stock >= 5 && juegoSeleccionado.stock < 15"
                    class="stock-info">
                {{ juegoSeleccionado.stock }} unidades en stock
              </span>
            </p>
          </div>

          <!-- Descripci√≥n -->
          <div class="modal-descripcion">
            <h4>Descripci√≥n</h4>
            <p>{{ juegoSeleccionado.descripcion }}</p>
          </div>

          <!-- Acciones Modal -->
          <div class="modal-actions">
            <button (click)="agregarAlCarrito(juegoSeleccionado)" class="btn btn-success btn-large">
              üõí Agregar al Carrito - ${{ juegoSeleccionado.precio }}
            </button>
            <button (click)="agregarListaDeseos(juegoSeleccionado)" class="btn btn-wishlist">
              ‚ù§Ô∏è Lista de Deseos
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>