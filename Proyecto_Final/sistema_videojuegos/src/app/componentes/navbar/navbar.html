<nav class="navbar">
  <div class="nav-container">
    <!-- Logo y Brand -->
    <div class="nav-brand">
      <a routerLink="/" class="logo-link">
        <span class="logo">ğŸ®</span>
        <span class="brand-name">GameStore</span>
      </a>
    </div>

    <!-- NavegaciÃ³n Principal -->
    <div class="nav-links">
      <a routerLink="/catalogo" class="nav-link">
        <span class="nav-icon">ğŸ•¹ï¸</span>
        CatÃ¡logo
      </a>
      
      <a *ngIf="esAdmin" routerLink="/admin" class="nav-link admin-link">
        <span class="nav-icon">ğŸ›¡ï¸</span>
        Admin
      </a>

      <!-- Carrito (placeholder) -->
      <a routerLink="/carrito" class="nav-link cart-link">
        <span class="nav-icon">ğŸ›’</span>
        Carrito
        <span class="cart-badge">0</span>
      </a>
    </div>

    <!-- SecciÃ³n Usuario -->
    <div class="nav-user">
      <!-- Usuario NO logueado -->
      <div *ngIf="!estaLogueado" class="auth-buttons">
        <a routerLink="/login" class="btn btn-outline btn-small">
          Iniciar SesiÃ³n
        </a>
        <a routerLink="/registro" class="btn btn-primary btn-small">
          Registrarse
        </a>
      </div>

      <!-- Usuario Logueado -->
      <div *ngIf="estaLogueado" class="user-menu-container">
        <button 
          (click)="toggleMenuUsuario()"
          class="user-button"
          [class.active]="mostrarMenuUsuario"
        >
          <div class="user-avatar">
            {{ usuario?.nombre?.charAt(0) }}{{ usuario?.apellido?.charAt(0) }}
          </div>
          <span class="user-name">
            Hola, {{ usuario?.nombre }}
          </span>
          <span class="dropdown-arrow">â–¼</span>
        </button>

        <!-- MenÃº Desplegable Usuario -->
        <div 
          *ngIf="mostrarMenuUsuario"
          class="user-dropdown"
          (click)="$event.stopPropagation()"
        >
          <!-- InformaciÃ³n del usuario -->
          <div class="user-info">
            <div class="user-avatar large">
              {{ usuario?.nombre?.charAt(0) }}{{ usuario?.apellido?.charAt(0) }}
            </div>
            <div class="user-details">
              <strong>{{ usuario?.nombre }} {{ usuario?.apellido }}</strong>
              <small>{{ usuario?.email }}</small>
              <span *ngIf="esAdmin" class="admin-badge">Administrador</span>
            </div>
          </div>

          <div class="dropdown-divider"></div>

          <!-- Opciones del menÃº -->
          <button (click)="irAPerfil()" class="dropdown-item">
            <span class="item-icon">ğŸ‘¤</span>
            Mi Perfil
          </button>

          <button *ngIf="esAdmin" (click)="irAAdmin()" class="dropdown-item">
            <span class="item-icon">ğŸ›¡ï¸</span>
            Panel Admin
          </button>

          <a routerLink="/mis-pedidos" class="dropdown-item">
            <span class="item-icon">ğŸ“¦</span>
            Mis Pedidos
          </a>

          <a routerLink="/lista-deseos" class="dropdown-item">
            <span class="item-icon">â¤ï¸</span>
            Lista de Deseos
          </a>

          <div class="dropdown-divider"></div>

          <!-- Cerrar sesiÃ³n -->
          <button (click)="logout()" class="dropdown-item logout-item">
            <span class="item-icon">ğŸšª</span>
            Cerrar SesiÃ³n
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay para cerrar menÃº -->
  <div 
    *ngIf="mostrarMenuUsuario"
    class="menu-overlay"
    (click)="cerrarMenuUsuario()"
  ></div>
</nav>